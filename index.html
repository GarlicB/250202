<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WaveAttack MAX - ì—…ê·¸ë ˆì´ë“œ ë²„ì „</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="introControls">
      <button id="startGame" class="game-button">ê²Œì„ ì‹œì‘</button>
    </div>
    <canvas id="gameCanvas"></canvas>
    <!-- ì˜µì…˜(ë””ë²„ê·¸) ëª¨ë‹¬ -->
    <div id="optionsModal" class="modal">
      <div class="modal-header">
        <h2>ğŸ› ï¸ ë””ë²„ê·¸ ì½˜ì†”</h2>
        <button id="closeOptions" class="close-btn">Ã—</button>
      </div>

      <div class="modal-content">
        <div class="debug-section">
          <div class="section-header">
            <span class="section-icon">ğŸ¨</span>
            <h3>ì‹œê° íš¨ê³¼</h3>
          </div>
          <div class="section-content">
            <div class="input-group">
              <label>ë°°ê²½ ìƒ‰ìƒ:</label>
              <input type="color" id="bgColorPicker" value="#111111" />
              <button id="applyBgColor" class="action-btn">ì ìš©</button>
            </div>
          </div>
        </div>

        <div class="debug-section">
          <div class="section-header">
            <span class="section-icon">ğŸ¯</span>
            <h3>ì „íˆ¬ í…ŒìŠ¤íŠ¸</h3>
          </div>
          <div class="section-content">
            <div class="input-group">
              <label>ì´ì•Œ í…ŒìŠ¤íŠ¸:</label>
              <button id="spawnTestBullet" class="action-btn">ì´ì•Œ ë°œì‚¬</button>
            </div>
            <div class="input-group">
              <label>ëª¹ í…ŒìŠ¤íŠ¸:</label>
              <button id="spawnTestEnemy" class="action-btn">ëª¹ ì†Œí™˜</button>
            </div>
          </div>
        </div>

        <div class="debug-section">
          <div class="section-header">
            <span class="section-icon">âš¡</span>
            <h3>ìŠ¤í‚¬ í™œì„±í™”</h3>
          </div>
          <div class="section-content">
            <div class="input-group">
              <label>ì¿¨íƒ€ì„ ì œê±°:</label>
              <input type="checkbox" id="removeSkillCooldown" checked />
            </div>
            <div class="input-group">
              <label>ê¸°ë³¸ ì´ì•Œ ì œê±°:</label>
              <input type="checkbox" id="removeBasicBullet" />
            </div>
            <div class="skill-grid">
              <div class="skill-item">
                <input
                  type="checkbox"
                  id="skill_regenAura"
                  data-skill="regenAura"
                  checked
                />
                <label for="skill_regenAura">
                  <span class="skill-icon">ğŸ’š</span>
                  íšŒë³µ ì˜¤ë¼
                  <span class="key-hint">Q</span>
                </label>
              </div>
              <div class="skill-item">
                <input
                  type="checkbox"
                  id="skill_homingLaser"
                  data-skill="homingLaser"
                  checked
                />
                <label for="skill_homingLaser">
                  <span class="skill-icon">ğŸ¯</span>
                  ë ˆì´ì € ë¹”
                  <span class="key-hint">W</span>
                </label>
              </div>
              <div class="skill-item">
                <input
                  type="checkbox"
                  id="skill_chainLightning"
                  data-skill="chainLightning"
                  checked
                />
                <label for="skill_chainLightning">
                  <span class="skill-icon">âš¡</span>
                  ì—°ì‡„ ë²ˆê°œ
                  <span class="key-hint">E</span>
                </label>
              </div>
              <div class="skill-item">
                <input
                  type="checkbox"
                  id="skill_meteorShower"
                  data-skill="meteorShower"
                  checked
                />
                <label for="skill_meteorShower">
                  <span class="skill-icon">â˜„ï¸</span>
                  ë©”í…Œì˜¤
                  <span class="key-hint">R</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="debug-section">
          <div class="section-header">
            <span class="section-icon">ğŸ“Š</span>
            <h3>ê²Œì„ ì§„í–‰</h3>
          </div>
          <div class="section-content">
            <div class="input-group">
              <label>ë ˆë²¨ì—… í…ŒìŠ¤íŠ¸:</label>
              <button id="simulateLevelUp" class="action-btn">ë ˆë²¨ì—…</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button id="debugButton">
      <span class="debug-icon">ğŸ› ï¸</span>
      ë””ë²„ê·¸
    </button>

    <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ UI -->
    <div id="mobileControls">
      <!-- ë ˆì´ì € ìŠ¤í‚¬ ë²„íŠ¼ -->
      <button id="laserSkillBtn" class="skill-button">
        <span class="skill-icon">ğŸ¯</span>
        ë ˆì´ì €
        <div class="charge-bar"></div>
      </button>

      <!-- ê°€ìƒ ì¡°ì´ìŠ¤í‹± -->
      <div id="joystickArea">
        <div id="joystickBase"></div>
        <div id="joystickHandle"></div>
      </div>
    </div>

    <style>
      /* ê²Œì„ ì‹œì‘ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ìˆ˜ì • */
      #introControls {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2000; /* ì¡°ì´ìŠ¤í‹±ë³´ë‹¤ ìœ„ì— í‘œì‹œ */
        pointer-events: auto;
      }

      .game-button {
        background: rgba(0, 0, 0, 0.8);
        color: #ffd700;
        border: 2px solid #ffd700;
        padding: 15px 30px;
        font-size: 24px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        pointer-events: auto;
      }

      .game-button:hover {
        background: rgba(255, 215, 0, 0.2);
      }

      /* ì¡°ì´ìŠ¤í‹± ì˜ì—­ ìˆ˜ì • */
      #joystickArea {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 70%;
        background: transparent;
        touch-action: none;
        z-index: 1000;
        display: none; /* ê²Œì„ ì‹œì‘ ì „ì—ëŠ” ìˆ¨ê¹€ */
      }

      #mobileControls {
        position: fixed;
        z-index: 1000;
        display: none;
        pointer-events: none;
      }

      @media (max-width: 768px) {
        #mobileControls {
          display: block;
        }

        #joystickArea {
          display: block; /* ëª¨ë°”ì¼ì—ì„œë§Œ í‘œì‹œ */
        }

        .game-button {
          font-size: 20px;
          padding: 12px 24px;
        }
      }

      /* ìŠ¤í‚¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
      .skill-button {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid #ffd700;
        color: #ffd700;
        padding: 15px 25px;
        border-radius: 25px;
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        transition: all 0.3s;
        pointer-events: auto; /* ë²„íŠ¼ì€ í„°ì¹˜ ê°€ëŠ¥ */
      }

      /* ì¡°ì´ìŠ¤í‹± ìŠ¤íƒ€ì¼ */
      #joystickBase {
        position: fixed;
        width: 100px;
        height: 100px;
        background: rgba(255, 255, 255, 0.15);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        backdrop-filter: blur(5px);
        display: none;
      }

      #joystickHandle {
        position: fixed;
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.4);
        border: 2px solid rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        backdrop-filter: blur(5px);
        display: none;
      }

      /* ëª¨ë°”ì¼ ìŠ¤í‚¬ ì„ íƒ UI */
      .mobile-skill-select {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        padding: 20px;
        border-radius: 15px;
        width: 80%;
        max-width: 400px;
        z-index: 1000;
      }

      .mobile-skill-option {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        margin: 10px 0;
        border-radius: 10px;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .mobile-skill-option .skill-icon {
        font-size: 24px;
      }

      .mobile-skill-option .skill-name {
        font-size: 18px;
        font-weight: bold;
      }

      .mobile-skill-option .skill-description {
        font-size: 14px;
        opacity: 0.8;
        margin: 0;
      }

      .mobile-skill-option:active {
        background: rgba(255, 215, 0, 0.3);
      }

      /* ëª¨ë°”ì¼ ìƒì  UI */
      .mobile-shop {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.9);
        padding: 20px;
        border-radius: 15px;
        width: 80%;
        max-width: 400px;
        z-index: 1000;
      }

      .mobile-shop-item {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        margin: 10px 0;
        border-radius: 10px;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .mobile-shop-item .item-icon {
        font-size: 24px;
      }

      .mobile-shop-item .item-name {
        flex: 1;
        margin: 0 15px;
        font-size: 16px;
      }

      .mobile-shop-item .item-cost {
        color: #ffd700;
        font-weight: bold;
      }

      .mobile-shop-item:active {
        background: rgba(255, 215, 0, 0.3);
      }

      .mobile-shop-close {
        width: 100%;
        padding: 15px;
        margin-top: 20px;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }

      .mobile-shop-close:active {
        background: rgba(255, 255, 255, 0.3);
      }

      /* ì°¨ì§€ ë°” ìŠ¤íƒ€ì¼ ê°œì„  */
      .charge-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        height: 4px;
        width: 0%;
        background: linear-gradient(to right, #ffd700, #ff6b6b);
        border-radius: 2px;
        transition: width 0.1s linear;
      }

      .skill-button.charging {
        background: rgba(255, 215, 0, 0.2);
      }
    </style>

    <script type="module">
      import { Game } from "./js/core/Game.js";
      const game = new Game();
    </script>
  </body>
</html>
